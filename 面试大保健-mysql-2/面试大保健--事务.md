你好我是大鱼哥，今天我们要讲的是mysql三部曲中的--事务，都说mysql有三大拦路虎--事务，锁和索引。今天我们就来会会拦路虎中的大哥--事务。

首先，我们得明确事务是什么，事务用通俗的话来说就是交易，英文中的transaction就是交易的意思。通过交易我们就很好理解为什么有交易的开始和交易的提交，交易是一系列动作的合集。打个比方一个交易肯定有钱的划转，物品的交换，人的沟通建立等等。因此事务并非是一件事，而是很多件事，当然这很多件事情对外暴露感觉就好像一件事情。
那么这么多件事情该如何抽象出来呢，就好像交易这件事情，不可能说只有通过线下交易才属于交易，线上的交易同样属于交易。所以需要抽象出来一些具体的特征用于描述交易这件事情。

it男们就用了acid来定义事务，即所有的事务都必须满足这些条件。否则你的事务就不能叫做事务。既然是定义，那肯定需要完全摸透，不然事务是个啥都搞不清。

a 原子性，即一件事务内的所有动作要么同时成功，要么同时失败。这个很好理解，假设交易失败，比如某一方反悔，钱该退就退，不能私自把钱吞掉。在mysql中如何保证的呢，答案是undo log，可以这么理解，每次的操作都会留下一定记录，就像支付宝，作为买方和卖方的中介，一旦出现问题，钱会退到付款账户。

undolog具有和支付宝相同的作用

c 一致性，何为一致性。一致性是指

i 隔离性，隔离性很好理解。两次不同的交易过程不能互相干扰。假设我向a买了东西，但是因为b发错快递了，给我发了一份。所以这时候我会收到两份快递。这当然是有问题的，因为那个快递本来要发给c的，相当于c就收不到东西了。在mysql中，有四个隔离级别，分别是读未提交，读已提交，可重复读，可串行化。前后两种实现相对比较简单，中间两种采用mvcc模式实现。并且mysql可以在不串行化的架构上通过锁实现可串行化。

d 持久性，持久性是指宕机后，数据可以得到恢复。这需要借助redolog实现。

聪明的同学就会问，这个undolog是不是在mvcc中也用。答案是 是的，mvcc中正是使用的undolog。

下面重点讲下 mvcc和回滚的实现


什么是mvcc muti version concurrent control 多发版本控制
那么mysql是如何实现mvcc的。在不同的隔离级别下，mvcc又有什么不一样的地方。



弄清楚了mysql里的事务的工作原理。
那么再来看下在实际使用过程中，或者可以说在结合spring的情况下如何使用事务，在使用事务的情况下有什么需要注意的。
